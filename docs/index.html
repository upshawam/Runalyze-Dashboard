<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>VO₂ Max & Marathon Shape Comparison</title>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4/dist/chart.umd.min.js"></script>

  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body {
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      margin: 20px;
      background: #fafafa;
      color: #111;
    }

    .page-title { font-size:1.1rem; font-weight:700; margin-bottom:8px; }
    .note { color:#666; font-size:0.95rem; margin-bottom:14px; }

    .chart-wrap { max-width:1200px; margin:20px auto; }
    canvas { width:100% !important; height:360px !important; display:block; background: #fff; border-radius:6px; box-shadow: 0 1px 4px rgba(0,0,0,0.04); }

    h2 { display:flex; align-items:center; gap:12px; justify-content:space-between; margin:0 0 12px 0; }
    .mar-pct { font-size:0.95rem; color:#222; font-weight:700; }
    .status { display: none; } /* hidden visually but kept for accessibility if needed */
    .error { color:#b00; font-weight:700; margin-top:8px; text-align:center; }

    /* marathon header / progress */
    .prog-header { display:flex; justify-content:space-between; align-items:center; gap:12px; max-width:1200px; margin:0 auto 8px; }
    .progress-wrap { display:flex; align-items:center; gap:8px; }
    .progress-bar-outer { width:220px; background:#eee; border-radius:6px; height:10px; overflow:hidden; position:relative; }
    .progress-bar-inner { height:100%; width:0%; background:linear-gradient(90deg,#2e86de,#2ec4b6); transition: width 400ms ease; }
    .progress-over { position:absolute; right:6px; top:-18px; font-size:12px; color:#2e86de; display:none; }

    /* prognosis table */
    .prog-table { width:100%; max-width:800px; margin:10px auto 0; border-collapse:collapse; background:#fff; border-radius:6px; overflow:hidden; box-shadow:0 1px 4px rgba(0,0,0,0.04); }
    .prog-table th, .prog-table td { padding:8px 10px; border-bottom:1px solid #eee; text-align:left; }
    .prog-table th { background:#f6f8fb; font-weight:700; }

    @media (max-width:700px) {
      canvas { height:300px !important; }
      h2 { flex-direction:column; align-items:flex-start; gap:6px; }
      .prog-table th, .prog-table td { padding:6px 8px; }
      .progress-bar-outer { width:160px; }
    }
  </style>
</head>
<body>
  <div class="page-title">VO₂ Max & Marathon Shape</div>
  <div class="note">Displays the last 30 days. Data loaded from data/&lt;user&gt;_vo2.json, data/&lt;user&gt;_marathon.json and data/&lt;user&gt;_prognosis.json (workflow).</div>

  <div id="errors" class="error" aria-live="polite"></div>
  <div id="status" class="status" aria-live="polite"></div>

  <section class="chart-wrap" aria-labelledby="vo2-title">
    <h2 id="vo2-title">VO₂ Max Trend (last 30 days)</h2>
    <canvas id="vo2Chart" role="img" aria-label="VO2 Max trend chart"></canvas>
  </section>

  <section class="chart-wrap" aria-labelledby="mar-title">
    <!-- Marathon header with percent badge, progress bar and projection -->
    <div class="prog-header">
      <h2 id="mar-title" style="margin:0">Marathon Shape (last 30 days)</h2>
      <div style="display:flex;flex-direction:column;align-items:flex-end;gap:6px;">
        <div id="marathonPct" class="mar-pct">Kristin: --% &nbsp;&nbsp; Aaron: --%</div>

        <div style="display:flex;align-items:center;gap:8px;">
          <div style="font-size:0.85rem;color:#666;">Progress</div>
          <div style="position:relative;">
            <div class="progress-bar-outer" aria-hidden="true">
              <div id="marProgressBar" class="progress-bar-inner"></div>
              <div id="marOverflow" class="progress-over">+0%</div>
            </div>
          </div>
        </div>

        <div id="marProjection" style="font-size:0.85rem;color:#444;text-align:right;">Projected: --</div>
      </div>
    </div>

    <canvas id="marathonChart" role="img" aria-label="Marathon shape chart"></canvas>

    <!-- Prognosis table -->
    <table id="prognosisTable" class="prog-table" aria-label="Prognosis predictions">
      <thead>
        <tr><th>Distance</th><th>Kristin (time / pace)</th><th>Aaron (time / pace)</th></tr>
      </thead>
      <tbody>
        <tr><td colspan="3" style="text-align:center;color:#666">Loading prognosis…</td></tr>
      </tbody>
    </table>
  </section>

  <script src="app.js"></script>
</body>
</html>
